
> nestjs-api@1.0.0 test D:\dev\antigravity\vision-iq\apps\nestjs-api
> jest "src/pexels-sync/pexels-integration.service.spec.ts"

[31m[Nest] 6848  - [39m02/17/2026, 9:46:16 AM [31m  ERROR[39m [38;5;3m[PexelsIntegrationService] [39m[31mPexels API error: 429 Rate limit exceeded[39m
[31m[Nest] 6848  - [39m02/17/2026, 9:46:16 AM [31m  ERROR[39m [38;5;3m[PexelsIntegrationService] [39m[31mPexels sync failed[39m
Rate limit exceeded
PASS src/pexels-sync/pexels-integration.service.spec.ts (5.551 s)
  PexelsIntegrationService
    âˆš should be defined (2 ms)
    Feature Flag
      âˆš should return fallbacks when ENABLE_PEXELS is false (16 ms)
    syncPexelsLibrary
      âˆš should yield batches of images (42 ms)
      âˆš should yield correct batch_number when starting from a non-zero startPage (3 ms)
      âˆš should handle single page correctly (1 ms)
      âˆš should respect rate limiting and retry on 429 (103 ms)
      âˆš should throw error after max retries (332 ms)
      âˆš should respect Retry-After header (1108 ms)
      âˆš should respect X-Ratelimit-Reset header (2178 ms)

Test Suites: 1 passed, 1 total
Tests:       9 passed, 9 total
Snapshots:   0 total
Time:        5.688 s, estimated 6 s
Ran all test suites matching /src\\pexels-sync\\pexels-integration.service.spec.ts/i.
