[31m[Nest] 12412  - [39m02/12/2026, 3:34:13 PM [31m  ERROR[39m [38;5;3m[PexelsIntegrationService] [39m[31mPexels API error: 429 Rate limit exceeded[39m
[31m[Nest] 12412  - [39m02/12/2026, 3:34:13 PM [31m  ERROR[39m [38;5;3m[PexelsIntegrationService] [39m[31mPexels sync failed[39m
Rate limit exceeded
(node:12412) PromiseRejectionHandledWarning: Promise rejection was handled asynchronously (rejection id: 7)
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL src/pexels-sync/pexels-integration.service.spec.ts
  PexelsIntegrationService
    âˆš should be defined (16 ms)
    syncPexelsLibrary
      âˆš should yield batches of images (54 ms)
      âˆš should handle single page correctly (3 ms)
      âˆš should respect rate limiting and retry on 429 (4 ms)
      Ã— should throw error after max retries (7 ms)

  â— PexelsIntegrationService â€º syncPexelsLibrary â€º should throw error after max retries

    Rate limit exceeded



  â— PexelsIntegrationService â€º syncPexelsLibrary â€º should throw error after max retries

    expect(received).rejects.toThrow(expected)

    Expected substring: "Rate limit exceeded"

    Received function did not throw

    [0m [90m 157 |[39m 			}
     [90m 158 |[39m
    [31m[1m>[22m[39m[90m 159 |[39m 			[36mawait[39m expect(promise)[33m.[39mrejects[33m.[39mtoThrow([32m"Rate limit exceeded"[39m)[33m;[39m
     [90m     |[39m 			                              [31m[1m^[22m[39m
     [90m 160 |[39m 			[90m// Initial + 3 retries = 4 calls[39m
     [90m 161 |[39m 			expect(mockedAxios[33m.[39m[36mget[39m)[33m.[39mtoHaveBeenCalledTimes([35m4[39m)[33m;[39m
     [90m 162 |[39m[0m

      at Object.toThrow (../../node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:218:22)
      at Object.<anonymous> (src/pexels-sync/pexels-integration.service.spec.ts:159:34)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 4 passed, 5 total
Snapshots:   0 total
Time:        1.969 s
Ran all test suites matching /src\\pexels-sync\\pexels-integration.service.spec.ts/i.
