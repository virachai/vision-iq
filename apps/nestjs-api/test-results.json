{"numFailedTestSuites":1,"numFailedTests":1,"numPassedTestSuites":0,"numPassedTests":6,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":1,"numTotalTests":7,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1770963658474,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["GeminiAnalysisService","analyzeImage"],"duration":32,"failureDetails":[],"failureMessages":[],"fullName":"GeminiAnalysisService analyzeImage should successfully analyze an image via WebSockets","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should successfully analyze an image via WebSockets"},{"ancestorTitles":["GeminiAnalysisService","analyzeImage"],"duration":22,"failureDetails":[],"failureMessages":[],"fullName":"GeminiAnalysisService analyzeImage should handle markdown code blocks in response","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle markdown code blocks in response"},{"ancestorTitles":["GeminiAnalysisService","analyzeImage"],"duration":25,"failureDetails":[],"failureMessages":[],"fullName":"GeminiAnalysisService analyzeImage should throw error if JSON is invalid","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw error if JSON is invalid"},{"ancestorTitles":["GeminiAnalysisService","analyzeImage"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"GeminiAnalysisService analyzeImage should handle Gemini Live API error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle Gemini Live API error"},{"ancestorTitles":["GeminiAnalysisService","analyzeImage"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"GeminiAnalysisService analyzeImage should handle image fetch failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle image fetch failure"},{"ancestorTitles":["GeminiAnalysisService","analyzeImage"],"duration":5012,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at D:\\dev\\antigravity\\vision-iq\\apps\\nestjs-api\\src\\image-analysis\\gemini-analysis.service.spec.ts:177:5\n    at _dispatchDescribe (D:\\dev\\antigravity\\vision-iq\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (D:\\dev\\antigravity\\vision-iq\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at D:\\dev\\antigravity\\vision-iq\\apps\\nestjs-api\\src\\image-analysis\\gemini-analysis.service.spec.ts:22:3\n    at _dispatchDescribe (D:\\dev\\antigravity\\vision-iq\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (D:\\dev\\antigravity\\vision-iq\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (D:\\dev\\antigravity\\vision-iq\\apps\\nestjs-api\\src\\image-analysis\\gemini-analysis.service.spec.ts:8:1)\n    at Runtime._execModule (D:\\dev\\antigravity\\vision-iq\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (D:\\dev\\antigravity\\vision-iq\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (D:\\dev\\antigravity\\vision-iq\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (D:\\dev\\antigravity\\vision-iq\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at async runTestInternal (D:\\dev\\antigravity\\vision-iq\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at async runTest (D:\\dev\\antigravity\\vision-iq\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"GeminiAnalysisService analyzeImage should handle WebSocket timeout","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle WebSocket timeout"},{"ancestorTitles":["GeminiAnalysisService","Initialization"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"GeminiAnalysisService Initialization should warn if GEMINI_API_KEY is not set","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should warn if GEMINI_API_KEY is not set"}],"endTime":1770963665449,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mGeminiAnalysisService › analyzeImage › should handle WebSocket timeout\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 175 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 176 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 177 |\u001b[39m     it(\u001b[32m\"should handle WebSocket timeout\"\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 178 |\u001b[39m       jest\u001b[33m.\u001b[39museFakeTimers()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 179 |\u001b[39m       setupMockWS([])\u001b[33m;\u001b[39m \u001b[90m// No response\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 180 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/image-analysis/gemini-analysis.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:177:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/image-analysis/gemini-analysis.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:22:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/image-analysis/gemini-analysis.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:1)\u001b[22m\u001b[2m\u001b[22m\n","name":"D:\\dev\\antigravity\\vision-iq\\apps\\nestjs-api\\src\\image-analysis\\gemini-analysis.service.spec.ts","startTime":1770963658646,"status":"failed","summary":""}],"wasInterrupted":false}
